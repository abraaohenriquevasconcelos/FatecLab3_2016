<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Lista de chamados</title>
	<script src="http://code.jquery.com/jquery-latest.min.js"></script>
	
	<link href="css/bootstrap.min.css" rel=stylesheet>
 
	<link href="css/bootstrap.css" rel="stylesheet">
   
   <script>
   		$(document).ready(function(){
   			var nomeUsuario = sessionStorage.getItem("nomeUsuario");
   		   	var nivelAcesso = sessionStorage.getItem("nivelAcesso");
   		    if(nomeUsuario == null || nivelAcesso == "2"){
   		   		window.location.href = '/index.html'
   		   	}
   			
   			$.getJSON("/listarChamados", function(data){
   				
   				
   				var linhas = [];
   				
   				alert(JSON.stringify(data));
   				
   				$.each(data, function(i){
   					linhas.push("<tr> <td>"+this.numeroChamado+"</td> <td>"+this.nomeUsuarioChamado+"</td> <td>"+this.descricaoChamado+"</td> <td>"+this.dataChamado+"</td><td>"+this.situacaoChamado+"</td><td><a class='btn btn-info' role='' href='/editarChamado.html?"+this.numeroChamado+"'>Editar</a> <a class='btn btn-danger' role='' href='/excluirChamado.html?"+this.numeroChamado+"'>Excluir</a></td></tr>");
   					
   				});
   				
   				alert(linhas);
   				$("#tbody").append(linhas);
   				
   			});
   		});
   </script>
</head>
<body>

		<ul class="nav nav-pills">
			<li><a href="administrador.html">Painel de Controle</a></li>
			<li><a href="abrirChamado.html">Abrir Chamado</a></li>
			<li class="active"><a href="listarChamados.html">Listar Chamados</a></li>
		</ul>

<table class="table table-bordered">
	<caption style="font-size: 20px;">Chamados</caption>
	<thead>
		<tr>
			<th>Número do Chamado</th>
			<th>Usuário</th>
			<th>Descrição</th>
			<th>Data</th>
			<th>Situação</th>
			<th>Ações</th>
		</tr>
	</thead>
	<tbody id="tbody">
		
	</tbody>

</table>
		
		
		

	
</body>
</html>